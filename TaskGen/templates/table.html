<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task Table</title>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/table.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

</head>
<body>
    <div class='heading'>

        <h1>Task Table</h1>
        
    <div/>

    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Position</th>
                <th>Task</th>
                <th>Task Description</th>
                <th>Deadline</th>
            </tr>
        </thead>
        <tbody>
            {% for task in tasks %}
                <tr>
                    <td>{{ task.name }}</td>
                    <td>{{ task.position }}</td>
                    <td>{{ task.task }}</td>
                    <td>{{ task.task_description }}</td>
                    <td>{{ task.deadline }}</td>
                    <td>
                        <a href="{% url 'edit_task' task.id %}" class="edit-icon">
                            <i class="fas fa-edit"></i>
                        </a>
                        <a href="#" class="delete-icon" onclick="confirmDelete({{ task.id }})">
                            <i class="fas fa-trash-alt"></i>
                        </a>
                    </td>
                </tr>
            {% endfor %}

            <script>
                function confirmDelete(taskId) {
                    if (confirm('Are you sure you want to delete this task?')) {
                        // If confirmed, redirect to the delete URL
                        window.location.href = `/delete_task/${taskId}/`;
                    } else {
                        // If not confirmed, do nothing
                    }
                }
            </script> 
        </tbody>
    </table>
    <br/>
     
    <button class="back"><a class='link' href="{% url 'main_page' %}">Back</a></button>
    <button class="regenerate"><a class='regen' href="{% url 'regenerate_tasks' %}" >Regenerate</a></button>
    <button class="add_task"><a class='add' href="{% url 'add_task' %}">Add Row</a></button>
    <button class="download"><a class='link' href="{% url 'download_excel' %}"><i class="fas fa-check"></i>  Download</a>
    <button class="instruction"><a class='instrucion' href="{% url 'instruction_page' %}">instruction</a></button>
    </button>
    



</body>
</html>
